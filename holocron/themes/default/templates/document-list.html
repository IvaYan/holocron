{#-
    holocron/theme/default/templates/document-list.html
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

    Template for rendering Holocron index pages.

    :copyright: (c) 2014, Andrii Gamaiunov
    :license: BSD, see LICENSE for details
-#}

{% extends "base.html" %}

{% block title %}{{ sitename }}{% endblock %}


{% block content %}
{#- We need to add "created" attribute (which is a datetime) to all
    posts, since we use it in "groupby" filter next in the code. -#}
{% for post in posts %}
  {% do setattr(post, 'created', post.get_created_datetime()) %}
{% endfor %}

{#- Prints all posts grouped by year. -#}
<div class="index">
{% for group in posts|groupby('created.year') %}
  <h2>{{ group.grouper }}</h2>

  {% for post in group.list %}
  <section class="index-entry">
    <time datetime="{{ post.created.isoformat() }}">
      {{ post.created.strftime('%b %d, %Y') }}
    </time>
    <a href="{{ post.url }}">{{ post.meta["title"] }}</a>
  </section>
  {% endfor %}
{% endfor %}
</div> <!-- /.index -->
{% endblock %}
